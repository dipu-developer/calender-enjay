<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Responsive Website</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <style>
    .calendar {
      display: flex;
      flex-wrap: nowrap;
    }
    .day {
      flex: 1;
      border: 1px solid #ccc;
      padding: 10px;
      box-sizing: border-box;
    }
    .time-slot {
      margin-bottom: 5px;
    }
    .task-list {
      margin-top: 20px;
    }
    .task {
      margin-bottom: 10px;
    }
  </style>
  <body>
    <header class="header border">
      <div class="container">
        <div class="d-flex">
          <div class="icon" id="toggleSidebar">
            <img src="img/ham.svg" alt="icon" />
          </div>
          <span class="header-icon">Calendar</span>
          <div>
            <div class="d-flex ml-118">
              <select
                id="view"
                class="select-dropdown"
                onchange="handleOptionChange(this)"
              >
                <option value="year">Year</option>
                <option value="month">Month</option>
                <option value="week">Week</option>
                <!-- Added Week option -->
              </select>
              <div class="side">
                <div class="icon" onclick="showPreview()">
                  <img src="img/left.svg" alt="left" />
                </div>
                <div class="icon" onclick="showNext()">
                  <img src="img/right.svg" alt="right" />
                </div>
              </div>
            </div>
          </div>
          <select id="monthselect" class="select-dropdown d-none" onchange="handleMonthChange(this)">
            <option value="1">January</option>
            <option value="2">February</option>
            <option value="3">March</option>
            <option value="4">April</option>
            <option value="5">May</option>
            <option value="6">June</option>
            <option value="7">July</option>
            <option value="8">August</option>
            <option value="9">September</option>
            <option value="10">October</option>
            <option value="11">November</option>
            <option value="12">December</option>
          </select>

          <span id="showdata" style="text-align: center; margin: auto;">2024</span>
        </div>
      </div>
    </header>

    <div class="sidebar border" id="sidebar">
      <div class="notes-container">
        <div class="d-flex jc">
          <span>Notes</span>
          <span>
            <img src="img/delete.svg" alt="delete" class="delete" id="delete" />
          </span>
        </div>
        <div id="notes"></div>
      </div>
    </div>

    <div class="content" id="mainContent">
      <div class="year" id="yearlyCalendar"></div>

    </div>

    <script src="js/render.js"></script>
    <script src="js/notes.js"></script>
    <!-- <script src="js/week.js"></script> -->

    <script>
      document
        .getElementById("toggleSidebar")
        .addEventListener("click", function () {
          document.getElementById("sidebar").classList.toggle("closed");
          document.getElementById("mainContent").classList.toggle("expanded");
        });

      const yearlyCalendar = document.getElementById("yearlyCalendar");
      const viewSelect = document.getElementById("view");
      const notesContainer = document.getElementById("notes");
      const monthrender = document.getElementById("monthselect");
      let currentYear = new Date().getFullYear();
      let currentMonth = new Date().getMonth() + 1;
      renderCalendar();
      renderNotes();

      function showNext() {
        const selectedView = viewSelect.value;
        switch (selectedView) {
          case "year":
            currentYear++;
            break;
          case "month":
            currentMonth++;
            if (currentMonth > 12) {
              currentMonth = 1;
              currentYear++;
            }
            break;
          case "week":
            startDate.setDate(startDate.getDate() + 7);
            createCalendar();
            displayTasks();
            break;
          default:
            break;
        }

        renderCalendar();
        handleOptionChange();
      }

      function showPreview() {
        const selectedView = viewSelect.value;

        switch (selectedView) {
          case "year":
            currentYear--;
            break;
          case "month":
            currentMonth--;

            if (currentMonth < 1) {
              currentMonth = 12;
              currentYear--;
            }
            break;
          case "week":
            startDate.setDate(startDate.getDate() - 7);
            createCalendar();
            displayTasks();
            // Implement week view (not implemented in this example)
            break;
          default:
            break;
        }

        renderCalendar();
        handleOptionChange();
      }
      
      function handleOptionChange() {
        renderCalendar();
        const days = document.getElementById("days");
        const month = document.getElementById("month");
        if (viewSelect.value === "month") {
          monthrender.classList.remove("d-none");
          month.classList.add("w-100");
          days.classList.add("h-100");
        }else{
          monthrender.classList.add("d-none");

        }
        if (viewSelect.value === "week") {
          yearlyCalendar.classList.add("calendar");
          day.classList.add("calendar");
        }
      }
     function handleMonthChange(){
      currentMonth = monthrender.value
      renderCalendar();
      handleOptionChange();
     }
    </script>
  </body>
</html>
